@tailwind base;
@tailwind components;
@tailwind utilities;

/* Charcoal dark mode with silver accents */

@layer base {
  :root {
    --background: 24 24 27;
    --foreground: 244 244 245;

    --card: 31 31 31; /* Updated to #1F1F1F */
    --card-foreground: 244 244 245;

    --popover: 24 24 27;
    --popover-foreground: 244 244 245;

    --primary: 244 244 245;
    --primary-foreground: 24 24 27;

    --secondary: 39 39 42;
    --secondary-foreground: 244 244 245;

    --muted: 39 39 42;
    --muted-foreground: 161 161 170;

    --accent: 39 39 42;
    --accent-foreground: 244 244 245;

    --destructive: 239 68 68;
    --destructive-foreground: 244 244 245;

    --border: 63 63 70;
    --input: 63 63 70;
    --ring: transparent; /* Removed focus rings entirely */

    --radius: 0.375rem;

    --sidebar-background: 24 24 27;
    --sidebar-foreground: 244 244 245;
    --sidebar-primary: 244 244 245;
    --sidebar-primary-foreground: 24 24 27;
    --sidebar-accent: 39 39 42; /* Changed from 63 63 70 to match secondary color */
    --sidebar-accent-foreground: 244 244 245;
    --sidebar-border: 63 63 70;
    --sidebar-ring: transparent; /* Removed focus rings entirely */

    /* Custom charcoal colors */
    --charcoal-bg: 24 24 27;
    --charcoal-surface: 39 39 42;
    --charcoal-border: 63 63 70;
    --silver-text: 244 244 245;
    --silver-accent: 212 212 216;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-zinc-900 text-zinc-100 font-sans;
    font-feature-settings: "rlig" 1, "calt" 1;
    /* CRITICAL FIX: Force scrollbar to always be present to prevent layout shift */
    overflow-y: scroll;
  }

  /* Remove all focus rings globally */
  input:focus,
  textarea:focus,
  button:focus,
  select:focus,
  [tabindex]:focus {
    outline: none !important;
    box-shadow: none !important;
    ring: none !important;
  }

  /* Override sidebar transition colors to prevent yellow */
  [data-sidebar="menu-button"] {
    transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease !important;
  }

  /* Force sidebar scrollbar and transition colors to gray */
  [data-sidebar="menu-button"]:hover,
  [data-sidebar="menu-button"]:focus,
  [data-sidebar="menu-button"]:active {
    background-color: rgb(39, 39, 42) !important;
    color: rgb(244, 244, 245) !important;
    border-color: rgb(63, 63, 70) !important;
  }

  /* Fix collapsed sidebar hover colors specifically */
  [data-collapsible="icon"] [data-sidebar="menu-button"]:hover,
  [data-collapsible="icon"] [data-sidebar="menu-button"]:focus,
  [data-collapsible="icon"] [data-sidebar="menu-button"]:active {
    background-color: rgb(39, 39, 42) !important;
    color: rgb(244, 244, 245) !important;
    border-color: rgb(63, 63, 70) !important;
  }

  /* Override any yellow or amber colors in sidebar components */
  .group-data-\[collapsible\=icon\] [data-sidebar="menu-button"]:hover {
    background-color: rgb(39, 39, 42) !important;
    color: rgb(244, 244, 245) !important;
  }

  /* Force tooltip background colors to match theme */
  [data-radix-popper-content-wrapper] {
    background-color: rgb(39, 39, 42) !important;
    color: rgb(244, 244, 245) !important;
    border-color: rgb(63, 63, 70) !important;
  }

  /* FIX FOR YELLOW TOOLTIP - Target the specific tooltip ring color */
  [role="tooltip"][data-side] {
    background-color: rgb(39, 39, 42) !important;
    color: rgb(244, 244, 245) !important;
    border: 1px solid rgb(63, 63, 70) !important;
    --tw-ring-color: transparent !important;
    box-shadow: none !important;
  }

  /* Override the Radix tooltip ring specifically */
  [data-radix-popper-content-wrapper] [role="tooltip"] {
    --tw-ring-color: transparent !important;
    --tw-ring-offset-shadow: none !important;
    --tw-ring-shadow: none !important;
    box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1) !important;
  }

  /* Nuclear option for any remaining yellow */
  * {
    --tw-ring-color: transparent !important;
  }
}

/* Charcoal scrollbar styling - no animation */
::-webkit-scrollbar {
  width: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: #52525b;
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: #71717a;
}

/* Charcoal scrollbar for Firefox */
* {
  scrollbar-width: thin;
  scrollbar-color: #52525b transparent;
}

/* Override any remaining yellow scrollbar or transition colors */
* {
  scrollbar-color: #52525b transparent !important;
}

/* Silver gradient text for titles */
.title-gradient {
  background: linear-gradient(135deg, #f4f4f5 0%, #d4d4d8 50%, #f4f4f5 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* Vertical separator with gradient fade */
.vertical-separator {
  position: relative;
  width: 1px;
  background: linear-gradient(to bottom, 
    transparent 0%, 
    rgba(161, 161, 170, 0.3) 20%, 
    rgba(161, 161, 170, 0.6) 50%, 
    rgba(161, 161, 170, 0.3) 80%, 
    transparent 100%
  );
}

/* Message timestamp inline styling */
.message-timestamp {
  opacity: 0;
  transition: opacity 0.2s ease-in-out;
  font-size: 0.75rem;
  margin-left: 8px;
  white-space: nowrap;
}

.message-timestamp.user-timestamp {
  color: rgba(20, 20, 22, 1); /* Much darker - almost black */
}

.message-timestamp.assistant-timestamp {
  color: rgba(244, 244, 245, 0.6); /* Lighter gray for assistant messages */
}

.message-bubble:hover .message-timestamp {
  opacity: 1;
}

/* AGGRESSIVE YELLOW TOOLTIP FIX */
[data-radix-popper-content-wrapper] * {
  --tw-ring-color: transparent !important;
  --tw-ring-offset-color: transparent !important;
  --tw-ring-opacity: 0 !important;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1) !important;
}

/* Target all possible tooltip elements */
[role="tooltip"],
[data-tooltip],
.tooltip,
[data-side="top"],
[data-side="bottom"],
[data-side="left"],
[data-side="right"] {
  background-color: rgb(39, 39, 42) !important;
  color: rgb(244, 244, 245) !important;
  border: 1px solid rgb(63, 63, 70) !important;
  --tw-ring-color: transparent !important;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1) !important;
}

/* Override Tailwind's ring utilities globally */
.ring-sidebar-ring {
  --tw-ring-color: transparent !important;
}